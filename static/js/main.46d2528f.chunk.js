(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{15:function(e,t,c){},16:function(e,t,c){},22:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(1),a=c.n(s),o=c(6),l=c.n(o),r=(c(15),c(4)),i=(c(16),function(e){var t=e.defaultOption,c=e.options,s=e.onChange;return t||(t={text:"Select",value:""}),Object(n.jsx)("div",{className:"select",children:Object(n.jsxs)("select",{onChange:function(e){return s?s(e.target.value):null},children:[Object(n.jsx)("option",{value:t.value,children:t.text}),c.map((function(e){return Object(n.jsx)("option",{value:e.value,children:e.text},e.value)}))]})})}),j=c(8),u=Object(j.a)().url("https://gl4i6q6cp9.execute-api.ap-southeast-2.amazonaws.com/v1");function d(e){var t=e.label,c=e.type,s=e.value,a=e.placeholder,o=e.onChange,l=e.required;return Object(n.jsxs)("div",{className:"field is-horizontal",children:[Object(n.jsx)("div",{className:"field-label is-normal",children:Object(n.jsx)("label",{className:"label",children:t})}),Object(n.jsx)("div",{className:"field-body",children:Object(n.jsx)("div",{className:"field",children:Object(n.jsx)("p",{className:"control",children:Object(n.jsx)("input",{className:"input",type:c,onChange:function(e){return o?o(e.target.value):null},placeholder:a,value:s,required:l})})})})]})}var b=c(9);var h=function(){var e=Object(s.useState)({}),t=Object(r.a)(e,2),c=t[0],a=t[1],o=Object(s.useState)([]),l=Object(r.a)(o,2),j=l[0],h=l[1],O=Object(s.useState)({}),f=Object(r.a)(O,2),m=f[0],x=f[1],p=Object(s.useState)(""),v=Object(r.a)(p,2),g=v[0],y=v[1],N=Object(s.useState)(""),S=Object(r.a)(N,2),w=S[0],C=S[1],k=Object(s.useState)(""),A=Object(r.a)(k,2),E=A[0],_=A[1],M=Object(s.useState)(""),W=Object(r.a)(M,2),q=W[0],T=W[1],K=Object(s.useState)([]),z=Object(r.a)(K,2),B=z[0],D=z[1],J=Object(s.useState)({color:"",message:"",open:!1}),F=Object(r.a)(J,2),H=F[0],I=F[1];function L(){(function(e,t){return u.url("/terms/".concat(e,"/").concat(t)).get().json()})(g,w).then((function(e){x(e.data.components)})).catch((function(e){I({color:"danger",message:e.error,open:!0})}))}function P(e){return function(){if(!B.includes(e))return 6===B.length?alert("You are only allowed to select a maximum of ".concat(6," sections.")):void D(B.concat(e));D(B.filter((function(t){return t!==e})))}}return Object(s.useEffect)((function(){u.url("/terms").get().json().then((function(e){h(e.data.sort().map((function(e){return{value:e,text:e}})))}))}),[]),Object(s.useEffect)((function(){if(""===g)return a({}),x({});(function(e){return u.url("/terms/".concat(e)).get().json()})(g).then((function(e){a(e.data),e.data[w]?L():C("")})).catch((function(e){I({color:"danger",message:e.error,open:!0})}))}),[g]),Object(s.useEffect)((function(){if(""===w)return x({});L()}),[w]),Object(n.jsxs)("div",{className:"container",id:"app",children:[Object(n.jsx)("p",{children:"Missed your perfect tute because it was taken by someone else? Classful will let you know when someone drops out of that class so that you can enrol!"}),H.open&&Object(n.jsxs)("div",{className:"notification is-".concat(H.color),children:[H.message,Object(n.jsx)("span",{className:"delete",onClick:function(){return I({open:!1})}})]}),Object(n.jsx)("h2",{className:"title is-2 is-center",children:"Selection"}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Selected Sections: "}),B.map((function(e){return Object(n.jsx)("span",{className:"selected-session",onClick:P(e),children:e})}))]}),Object(n.jsx)("br",{}),Object(n.jsx)(i,{options:j,defaultOption:{value:"",text:"Select Term"},onChange:y}),Object(n.jsx)(i,{options:Object.keys(c).map((function(e){return{value:e,text:"".concat(e," - ").concat(c[e])}})),onChange:C,defaultOption:{value:"",text:"Select Course"}}),Object(n.jsx)("div",{children:Object.keys(m).length>0&&Object(n.jsxs)("table",{className:"table is-fullwidth",id:"tbl-sections",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Code"}),Object(n.jsx)("th",{children:"Type"}),Object(n.jsx)("th",{children:"Status"}),Object(n.jsx)("th",{children:"Capacity"}),Object(n.jsx)("th",{children:"Times"})]})}),Object(n.jsx)("tbody",{children:Object.keys(m).sort().map((function(e){return Object(n.jsxs)("tr",{className:B.includes("".concat(g,"_").concat(w,"_").concat(e))?"selected":"",onClick:P("".concat(g,"_").concat(w,"_").concat(e)),children:[Object(n.jsx)("td",{children:e}),Object(n.jsx)("td",{children:m[e].cmp_type}),Object(n.jsx)("td",{children:m[e].status}),Object(n.jsxs)("td",{children:[m[e].filled,"/",m[e].maximum]}),Object(n.jsx)("td",{children:m[e].times})]},e)}))})]})}),Object(n.jsx)("br",{}),Object(n.jsx)("h2",{className:"title is-2 is-center",children:"Notification"}),Object(n.jsxs)("form",{onSubmit:function(e){return e.preventDefault(),E&&0!==B.length?q?void function(e,t,c){return u.url("/submit").post({captcha:e,email:t,sections:c}).json()}(q,E,B).then((function(){D([]),_(""),I({color:"success",message:"Success! We will keep your details for 14 days and will notify you if a class becomes available.",open:!0})})).catch((function(e){I({color:"danger",message:e.error,open:!0})})):I({message:"Please complete captcha",color:"danger",open:!0}):I({message:"No classes selected.",color:"danger",open:!0})},children:[Object(n.jsx)(d,{type:"email",label:"Email Address",value:E,placeholder:"example@unsw.edu.au",onChange:_,required:!0}),Object(n.jsx)("div",{style:{textAlign:"center"},children:Object(n.jsx)("div",{className:"recaptcha",children:Object(n.jsx)(b.a,{sitekey:"6Le_WwAVAAAAAKui2K6AujfMM6S-od2KgC2Q0DhW",onChange:T,onExpired:function(){return T("")}})})}),Object(n.jsx)("button",{className:"button is-primary is-fullwidth is-large",children:"Submit!"})]})]})};function O(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"navbar",children:Object(n.jsx)("span",{className:"brand",children:"Classful"})}),Object(n.jsx)(h,{}),Object(n.jsx)("footer",{children:Object(n.jsxs)("p",{children:["Made with \u2665 by ",Object(n.jsx)("a",{href:"https://tomn.me",children:"@lecafard"}),Object(n.jsx)("br",{}),"Heavily inspired by ",Object(n.jsx)("a",{href:"https://tutorifull.chybby.com/",children:"Tutorifull"}),Object(n.jsx)("br",{}),Object(n.jsx)("a",{href:"https://github.com/lecafard/classful",children:"Source"})]})})]})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(O,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.46d2528f.chunk.js.map